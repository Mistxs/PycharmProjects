import requests
import json
from datetime import datetime
from array import *

url = "https://api.yclients.com/api/v1/records/646846"

def check_visit(client_id):
  payload = json.dumps({
    "client_id": client_id
  })
  headers = {
    'Accept': 'application/vnd.yclients.v2+json',
    'Content-Type': 'application/json',
    'Authorization': 'rj257pguzmdk9fgaz8cr, e69793634796c00b57cb4bfd34f361d8',
    'Cookie': '__cf_bm=OUTsKJ_ZXy4_JeEDvDDIO1PL6wKI5BsTojYx9O7.7IE-1667291069-0-ARftKvlitsQtBvgdJIRYCxWp7OrRMgSu/XPtZWkT11N9KxKOI1wOyr3yK71yokCePnewdoE4OYQS0RzuC4FT1KA=; _cfuvid=fmWZ03G_V9rPBss5Eo3MRKoMLmGPD3HRsZyxSObmIao-1667289715646-0-604800000'
  }

  response = requests.request("GET", url, headers=headers, data=payload)
  request_data = response.json()
  clid = client_id
  print(request_data['success'])
  if request_data['success'] == "false":
    return ("not client")
  print(request_data['data'])
  if len(request_data['data']) != 0 and request_data['data'] != "null":
    first_date = request_data['data'][0]['date']
    # second_date = "2022-10-20 10:00:00"
    if len(request_data['data'][1]['date']) != 0:
      second_date = request_data['data'][1]['date']
      print(second_date)
      dateFormatter = "%Y-%m-%d %H:%M:%S"
      first_date_count = int(datetime.strptime(first_date, dateFormatter).strftime("%j"))
      second_date_count = int(datetime.strptime(second_date, dateFormatter).strftime("%j"))
      delta = first_date_count-second_date_count
      print(clid, " ", first_date, " ", second_date, delta)
      if delta>=45:
        print("FAILED")
      else:
        print("OK")







  return clid

# print(first_date)
# print(second_date)
# print(first_date_count-second_date_count)

base_client = array('i',[11386465, 107834495, 107834495, 107834495, 107834495, 107834495, 107834495, 107834495, 21060736, 18537669, 18537669, 18537669, 18537669, 12358169, 12358169, 28644779, 99615637, 99615637, 13270903, 12319460, 12319460, 12319460, 11005116, 11005116, 9585316, 9585316, 16271658, 14434203, 14434203, 14434203, 14559334, 30122784, 30122784, 15594428, 15594428, 32925560, 10822718, 13269243, 13269243, 103407310, 103407310, 25816208, 44383087, 14031157, 14031157, 14031157, 79217410, 25598756, 78460637, 22201339, 22201339, 22201339, 18316808, 12244092, 12244092, 11474784, 13602152, 13602152, 89056836, 46396431, 46396431, 46396431, 46396431, 100772179, 47063895, 16895664, 16895664, 17001160, 88023872, 14955555, 14955555, 27549805, 27549805, 16307268, 16307268, 82831883, 82831883, 26808013, 116820966, 106451296, 106451296, 96573847, 12513020, 74333334, 78038751, 75809139, 33620935, 33620935, 36661300, 36661300, 14759534, 76121387, 124120814, 17798937, 36791853, 12841753, 39057741, 39057741, 39057741, 15585267, 30309883, 10516516, 43515529, 43515529, 43515529, 20525170, 9177513, 12889717, 9704158, 9704158, 107147618, 107147618, 72407980, 13987354, 28986362, 19181057, 133571342, 133571342, 13330922, 13330922, 13330922, 13330922, 36561682, 36561682, 41305015, 41305015, 98224100, 14801142, 10183084, 10183084, 10183084, 42524745, 42524745, 23208374, 23208374, 22938022, 34031785, 8568016, 46333141, 46333141, 46333141, 46333141, 46333141, 46333141, 46333141, 46333141, 11596776, 11596776, 11596776, 11596776, 15260355, 74630021, 74630021, 74630021, 74630021, 74630021, 74630021, 22965791, 22965791, 22965791, 14075622, 20562045, 20562045, 75807109, 44876478, 10200437, 10200437, 38096011, 38096011, 10643019, 10643019, 10643019, 13020854, 13020854, 12002483, 12002483, 12002483, 12002483, 12803466, 32157844, 11874701, 11874701, 11874701, 10742792, 10742792, 10742792, 10742792, 29503729, 17168965, 12698000, 49154673, 72722403, 72722403, 9334049, 28761543, 28761543, 28761543, 28761543, 14718829, 49593246, 49593246, 49593246, 22913449, 22913449, 22913449, 22913449, 22913449, 101708761, 97763700, 97763700, 38193485, 38193485, 84850339, 33946218, 11392330, 96791735, 84754382, 84754382, 18973547, 18973547, 84035374, 77058112, 10636347, 12607936, 12607936, 12607936, 35750138, 35750138, 80573004, 80573004, 80573004, 80573004, 29705813, 36122909, 34727049, 34727049, 34727049, 26489169, 14534468, 50421851, 17768637, 17768637, 72695308, 72695308, 72695308, 89395997, 83927774, 15000634, 15000634, 9746212, 9746212, 76175470, 76175470, 14534359, 17780862, 19167001, 19167001, 18801923, 17158546, 26508818, 26508818, 26508818, 26508818, 26508818, 16544808, 16544808, 8846223, 8846223, 8846223, 108136699, 12364978, 10510936, 38170087, 12093120, 16335219, 16335219, 106314470, 13067450, 13067450, 13067450, 17199534, 19550982, 99226811, 99226811, 33888201, 33888201, 33888201, 9223109, 12651736, 42057036, 42057036, 28269828, 28269828, 28269828, 10103820, 10103820, 10103820, 10103820, 17812239, 141232655, 10007228, 24939599, 25940059, 12080915, 16501555, 31602242, 31602242, 10765823, 107003487, 107003487, 107003487, 107003487, 11488658, 18387365, 18387365, 89334947, 89334947, 89334947, 21074711, 21074711, 78307539, 33036889, 33036889, 34418426, 34418426, 34418426, 17778204, 108903922, 9025937, 15607364, 15607364, 15607364, 83892124, 38498169, 38498169, 38498169, 38498169, 38498169, 38498169, 21373523, 21373523, 12420683, 12420683, 27027264, 27027264, 27027264, 12141640, 102414677, 102414677, 102414677, 102414677, 10573997, 41247344, 20358905, 11708372, 13321070, 8889396, 11714901, 97740599, 40384927, 40384927, 24524688, 24524688, 35177442, 35177442, 35383058, 113311066, 115429754, 115429754, 24744779, 20183814, 75878981, 75878981, 33027217, 33027217, 33027217, 86611637, 86611637, 12069016, 26546360, 26546360, 12065405, 12065405, 26679347, 25185791, 11071554, 10649711, 10649711, 42442189, 42442189, 91415210, 107320995, 16501697, 8944907, 8944907, 19560918, 89043605, 89043605, 89043605, 89043605, 89043605, 89043605, 89043605, 89043605, 89043605, 89043605, 40672382, 79969386, 79969386, 79969386, 79969386, 79969386, 79969386, 79969386, 15021479, 36160780, 82038408, 10061902, 91589033, 91589033, 91589033, 9541849, 9541849, 49324251, 49324251, 33254348, 25296544, 79175673, 10623554, 10623554, 19633683, 19633683, 22604995, 22604995, 11530544, 42140945, 30409532, 31838921, 20236004, 26047906, 26047906, 26047906, 26047906, 26047906, 26047906, 85025639, 85025639, 10879311, 10879311, 75734804, 16306810, 16306810, 31924485, 31924485, 50631906, 29557371, 84333821, 8834433, 8834433, 8834433, 8834433, 8834433, 20424709, 20424709, 97286606, 14785517, 16859862, 17306343, 17306343, 10363941, 10363941, 10363941, 83000391, 18056214, 18056214, 18278863, 18278863, 18278863, 9599707, 9599707, 41713002, 41713002, 18265950, 18265950, 18265950, 9349780, 9349780, 77764777, 77764777, 77764777, 22553255, 18152486, 31032303, 31032303, 43004820, 43004820, 43004820, 43004820, 42643303, 10113794, 76385817, 76385817, 33640241, 33640241, 33640241, 12392907, 48027984, 48027984, 14096836, 102189709, 11512758, 8738252, 26105255, 26105255, 26105255, 116598538, 116598538, 116598538, 45740008, 45740008, 16957505, 35472100, 35472100, 130083006, 130082541, 130082541, 130082541, 130082541, 130082541, 130082541, 130082541, 130082948, 130082794, 130082794, 130082794, 130082794, 130082737, 130082737, 130082371, 130082414, 130082414, 130082364, 130083191, 130083191, 130083191, 130082791, 130082791, 130082677, 130082677, 130082677, 130082224, 130082570, 130082570, 130082932, 130082932, 130082382, 130082382, 130082218, 130082218, 130083691, 130083007, 130082663, 130082663, 130082663, 130082805, 130083216, 130083340, 130082876, 130082876, 130082876, 130082654, 130082587, 130082587, 130082982, 130082785, 130082785, 130082917, 130083051, 130083051, 130083051, 130083051, 130083351, 130082981, 130082227, 130082227, 130083397, 130082704, 130083029, 130083029, 130082236, 130082236, 130083093, 130083093, 130082347, 130082347, 130082685, 130083157, 130083334, 130083920, 130082198, 130082305, 130083042, 130082335, 130082335, 130082486, 130082486, 130083869, 130083482, 130082201, 130082657, 130082354, 130083450, 130083359, 130083359, 130083359, 130082344, 130082611, 130082255, 130082894, 130082894, 130082894, 130082712, 130082680, 130082279, 130082874, 130082874, 130083040, 130083040, 130082682, 130082527, 130083383, 130082232, 130082289, 130082289, 130082289, 130082289, 130082234, 130082234, 130082990, 130082990, 130083021, 130082381, 130082266, 130082266, 130082266, 130082778, 130082778, 130082284, 130082284, 130083387, 130082217, 130082557, 130082338, 130082338, 130082338, 130082338, 130082338, 130082338, 130082338, 130082338, 130082688, 130082688, 130082688, 130082688, 130082551, 130082636, 130082636, 130082636, 130082636, 130082636, 130082636, 130082310, 130082310, 130082310, 130082378, 130082209, 130082209, 130082714, 130082793, 130082278, 130082278, 130082952, 130082952, 130082888, 130082888, 130082888, 130083062, 130083062, 130082268, 130082268, 130082268, 130082268, 130083442, 130083106, 130083281, 130083281, 130083281, 130083064, 130083064, 130083064, 130083064, 130084208, 130083066, 130082300, 130083263, 130083233, 130083233, 130083121, 130082762, 130082762, 130082762, 130082762, 130082828, 130082595, 130082595, 130082595, 130082444, 130082444, 130082444, 130082444, 130082444, 130082231, 130082394, 130082394, 130082708, 130082708, 130083230, 130082465, 130082390, 130082930, 130082991, 130082991, 130082208, 130082208, 130083297, 130082359, 130082577, 130082643, 130082643, 130082643, 130082565, 130082565, 130082889, 130082889, 130082889, 130082889, 130082919, 130082528, 130082863, 130082863, 130082863, 130082980, 130082274, 130082781, 130083727, 130083727, 130083026, 130083026, 130083026, 130082617, 130082515, 130083003, 130083003, 130082312, 130082312, 130084226, 130084226, 130082687, 130082497, 130082656, 130082656, 130082211, 130083304, 130083089, 130083089, 130083089, 130083089, 130083089, 130083001, 130083001, 130082592, 130082592, 130082592, 130082522, 130082754, 130086766, 130082341, 130082334, 130082323, 130082323, 130082340, 130083080, 130083080, 130083080, 130082445, 130082767, 130082508, 130082508, 130083176, 130083176, 130083176, 130082447, 130082219, 130082536, 130082536, 130082690, 130082690, 130082690, 130083025, 130083025, 130083025, 130083025, 130082233, 130082249, 130082819, 130082823, 130082483, 130082699, 130083146, 130083146, 130083295, 130082583, 130082583, 130082583, 130082583, 130082638, 130083268, 130083268, 130082544, 130082544, 130082544, 130083866, 130083866, 130082992, 130082780, 130082780, 130083205, 130083205, 130083205, 130083142, 130082342, 130083213, 130082744, 130082744, 130082744, 130082542, 130082468, 130082468, 130082468, 130082468, 130082468, 130082468, 130082433, 130082433, 130082431, 130082431, 130082207, 130082207, 130082207, 130082459, 130082391, 130082391, 130082391, 130082391, 130082547, 130083009, 130083159, 130082514, 130082437, 130082815, 130082859, 130082977, 130082283, 130082283, 130083151, 130083151, 130082993, 130082993, 130082693, 130082215, 130082632, 130082632, 130083841, 130082911, 130082918, 130082918, 130082325, 130082325, 130082325, 130082961, 130082961, 130082639, 130083850, 130083850, 130083299, 130083299, 130083218, 130082221, 130082666, 130082628, 130082628, 130082230, 130082230, 130082329, 130082957, 130082761, 130082735, 130082735, 130082842, 130083726, 130083726, 130083726, 130083726, 130083726, 130083726, 130083726, 130083726, 130083726, 130083726, 130083361, 130082299, 130082299, 130082299, 130082299, 130082299, 130082299, 130082299, 130082504, 130082973, 130083102, 130082745, 130082302, 130082302, 130082302, 130083136, 130083136, 130082726, 130082726, 130082420, 130082415, 130082291, 130083033, 130083033, 130082615, 130082615, 130082552, 130082552, 130082741, 130082453, 130083055, 130082872, 130082607, 130082216, 130082216, 130082216, 130082216, 130082216, 130082216, 130082923, 130082923, 130083038, 130083038, 130082851, 130082831, 130082831, 130084016, 130084016, 130083156, 130083916, 130082970, 130082985, 130082985, 130082985, 130082985, 130082985, 130082243, 130082243, 130083134, 130082251, 130083415, 130085637, 130085637, 130082206, 130082206, 130082206, 130082246, 130083325, 130083325, 130082196, 130082196, 130082196, 130082475, 130082475, 130083633, 130083633, 130082260, 130082260, 130082260, 130082867, 130082867, 130082417, 130082417, 130082417, 130083129, 130082696, 130082242, 130082242, 130082442, 130082442, 130082442, 130082442, 130082826, 130083356, 130082484, 130082484, 130082698, 130082698, 130082698, 130083544, 130083261, 130083261, 130083459, 130082833, 130082900, 130082512, 130082264, 130082264, 130082264, 130083024, 130083024, 130083024, 130082521, 130082521, 130083346, 130082560, 130082560])


for i in range(598, 1043):
  print("Step ", i, base_client[i])
  check_visit(base_client[i])
